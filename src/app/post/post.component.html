<div class="posts">
    <div class="post-container" *ngFor="let post of posts">
        <div class="post-header">
            <img id="avatar" [src]="post.avatar" alt="Avatar">
            <div class="post-header-data"> 
                <p id="nickname">{{post.intagramNickName}}</p>
                <p id="address">{{post.address}}</p>
            </div>
            <button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu" id="menuButton">
                <mat-icon>more_vert</mat-icon>
            </button>
            <mat-menu #menu="matMenu">
            <button mat-menu-item (click)="downloadFile(post)">
                <mat-icon>download</mat-icon>
                <span>Download</span>
            </button>
            </mat-menu>
            
        </div>

        <div class="post-body">

            <!-- <img [src]="'data:image/jpeg;base64,' + post.medias[0].media" alt="instagramImg"> -->
            <!-- <iframe src="https://www.youtube.com/embed/3jT_q7dt-cM" frameborder="0" allowfullscreen>
            </iframe> youtube link-->
            <!-- base64 decoder  -->
            <!-- логика карусели -->
            <div class="carousel-container">
                <mat-carousel
                    color="accent"
                    maxWidth="100%"
                    [slides]="post.medias.length"
                    [autoplay]="false"
                    [maintainAspectRatio]="true"
                    [loop]="false"
                    [hideArrows]="false"
                    [hideIndicators]="false"
                    [useKeyboard]="true"
                    [useMouseWheel]="false"
                    [proportion]="70"
                    orientation="ltr"
                    >
                    <mat-carousel-slide
                        #matCarouselSlide
                        *ngFor="let element of post.medias; let i = index"
                        overlayColor="#00000040"
                        [hideOverlay]="true">
                            <img *ngIf="checkMediaImage(element.type)" [src]="element.media" alt="">
                            <div *ngIf="checkMediaVideo(element.type)" class="video-content">
                                <p>Данный формат медиа пока не поддерживается, но мы это скоро исправим!</p>
                            </div>
                    </mat-carousel-slide>    
                </mat-carousel>
            </div> 
            <a id="link-to-instagram" [href]="post.postUrl">
                <mat-icon aria-hidden="false" aria-label="Example home icon">open_in_new</mat-icon>
            </a>
        </div>
    
        <div class="post-footer">
            <p id="like">{{post.likes}} отметок "Нравится"</p>
            <p id="description"><span>{{post.intagramNickName}}</span> {{post.description}}</p>
            <p id="date">{{post.date}}</p> 
        </div>
    </div>
    <app-buttons-handlers (nextSubscription)="clickEvent($event)"></app-buttons-handlers>
</div>
